<!DOCTYPE html>
<html>
  <head>
    <title>Showroom</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" type="text/css" href="split.css">
    <link rel="stylesheet" type="text/css" href="tabs.css">
  </head>
  <body>
    <div class="content">
{{- if .Values.content.content_only }}
      <iframe id="doc" src="https://{{ .Release.Name }}-{{ .Release.Namespace }}.{{ .Values.deployer.domain }}/content" width="100%" style="border:none;"></iframe>
{{- else }}
      <div class="split left">
        <iframe id="doc" src="https://{{ .Release.Name }}-{{ .Release.Namespace }}.{{ .Values.deployer.domain }}/content" width="100%" style="border:none;"></iframe>
      </div>
      <div class="split right">
        <div class="tab">
{{-   if .Values.terminal.setup }}
          <button class="tablinks" onclick="openTerminal(event, 'terminal_tab')" id="defaultOpen" tabindex="0">Terminal</button>
{{-   end }}
{{-   if .Values.codeserver.setup }}
          <button class="tablinks" onclick="openTerminal(event, 'codeserver_tab')">Code Server</button>
{{-   end }}
        </div>
{{-   if .Values.terminal.setup }}
        <div id="terminal_tab" class="tabcontent">
          <iframe id="terminal_01" src="https://{{ .Release.Name }}-{{ .Release.Namespace }}.{{ .Values.deployer.domain }}/terminal" width="100%" style="border:none;"></iframe>
        </div>
{{-   end }}
{{-   if .Values.codeserver.setup }}
        <div id="codeserver_tab" class="tabcontent">
          <iframe id="codeserver" src="https://{{ .Release.Name }}-{{ .Release.Namespace }}.{{ .Values.deployer.domain }}/codeserver" width="100%" style="border:none;"></iframe>
        </div>
{{-   end }}
      </div>
{{- end }}
    </div>
    <script>
      document.getElementById("defaultOpen").click();
      function openTerminal(evt, tabName) {
        // Declare all variables
        var i, tabcontent, tablinks;
        // Get all elements with class="tabcontent" and hide them
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
          tabcontent[i].style.display = "none";
        }
        // Get all elements with class="tablinks" and remove the class "active"
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
          tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        // Show the current tab, and add an "active" class to the button that opened the tab
        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.className += "active";
      }
    </script>
    <script src="https://unpkg.com/split.js/dist/split.min.js"></script>
    <script>
      Split(['.left', '.right'], {
        sizes: [45,55],
      });
    </script>
  </body>
</html>
